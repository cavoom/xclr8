import { guard } from "./guard";
import { Tree } from "./tree";
export const isUtterance = guard("Utterance");
/**
 * Represents a parsed Utterance sample
 *
 * ```
 * "hi my name is {name}"
 * ```
 */
export class Utterance extends Tree {
    constructor(
    /**
     * Full text of the utterance sample.
     */
    text, 
    /**
     * Name references in the utterances sample, e.g. `{name}`.
     */
    names, loc) {
        super("Utterance", loc);
        Object.defineProperty(this, "text", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: text
        });
        Object.defineProperty(this, "names", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: names
        });
        this.setAsParentOn(names);
    }
    clone() {
        var _a;
        return new Utterance(this.text, (_a = this.names) === null || _a === void 0 ? void 0 : _a.map((n) => n.clone()), this.loc);
    }
}
/**
 * Parse Utterance Names from a piece of text.
 *
 * E.g `i want a {size} pizza with {cheese}` -> ["size", "cheese"]
 *
 * @param text utterance text
 * @returns array of slo
 */
export function parseUtteranceSlotNames(text) {
    const groups = [];
    const regex = /{([A-Za-z_0-9]+)}/gi;
    let match;
    while ((match = regex.exec(text)) !== null) {
        groups.push(match[1]);
    }
    if (groups.length > 0) {
        return groups;
    }
    return undefined;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXR0ZXJhbmNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2FzdC91dHRlcmFuY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLFNBQVMsQ0FBQztBQUc5QixPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBRTVCLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7QUFFOUM7Ozs7OztHQU1HO0FBQ0gsTUFBTSxPQUFPLFNBQVUsU0FBUSxJQUF1QjtJQUNwRDtJQUNFOztPQUVHO0lBQ00sSUFBWTtJQUNyQjs7T0FFRztJQUNNLEtBQWMsRUFDdkIsR0FBb0I7UUFFcEIsS0FBSyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQzs7Ozs7bUJBUGY7Ozs7OzttQkFJQTs7UUFJVCxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFTSxLQUFLOztRQUNWLE9BQU8sSUFBSSxTQUFTLENBQ2xCLElBQUksQ0FBQyxJQUFJLEVBQ1QsTUFBQSxJQUFJLENBQUMsS0FBSywwQ0FBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUNqQyxJQUFJLENBQUMsR0FBRyxDQUNULENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFFRDs7Ozs7OztHQU9HO0FBQ0gsTUFBTSxVQUFVLHVCQUF1QixDQUFDLElBQVk7SUFDbEQsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO0lBQ2xCLE1BQU0sS0FBSyxHQUFHLHFCQUFxQixDQUFDO0lBQ3BDLElBQUksS0FBNkIsQ0FBQztJQUNsQyxPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN2QjtJQUNELElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDckIsT0FBTyxNQUFNLENBQUM7S0FDZjtJQUNELE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUMifQ==