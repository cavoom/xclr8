"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.transformEachChild = exports.collectArray = exports.collect = exports.visitEachChildType = exports.visitEachChild = void 0;
const ask = __importStar(require("./ast"));
/**
 * Visit each child in a Node and call a callback to process it.
 *
 * This function is a general purpose tool for building other recursive search functions.
 *
 * @param node node to visit each child of
 * @param fn function to call with each child node
 */
function visitEachChild(expr, fn) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
    if (expr !== undefined) {
        if (expr.kind === "ActionDeclaration" || expr.kind === "DialogDeclaration") {
            visit(expr.returnType);
            (_a = expr.genericArguments) === null || _a === void 0 ? void 0 : _a.forEach(visit);
            (_b = expr.arguments) === null || _b === void 0 ? void 0 : _b.forEach(visit);
            if (expr.kind === "DialogDeclaration") {
                (_c = expr.samples) === null || _c === void 0 ? void 0 : _c.forEach(visit);
            }
        }
        else if (expr.kind === "Argument") {
            visit(expr.value);
        }
        else if (expr.kind === "ArgumentDeclaration") {
            visit(expr.type);
            visit(expr.defaultExpression);
        }
        else if (expr.kind === "Call") {
            if (Array.isArray(expr.arguments)) {
                expr.arguments.forEach(visit);
            }
            else if (ask.isListLiteral(expr.arguments)) {
                visit(expr.arguments);
            }
            (_d = expr.genericArguments) === null || _d === void 0 ? void 0 : _d.forEach(visit);
        }
        else if (expr.kind === "Condition") {
            visit(expr.when);
            visit(expr.then);
            visit(expr.else);
        }
        else if (expr.kind === "ListItem") {
            visit(expr.item);
        }
        else if (expr.kind === "ListLiteral") {
            (_e = expr.items) === null || _e === void 0 ? void 0 : _e.forEach(visit);
        }
        else if (expr.kind === "Module") {
            (_f = expr.expressions) === null || _f === void 0 ? void 0 : _f.forEach(visit);
        }
        else if (expr.kind === "NameDeclaration") {
            visit(expr.expression);
            visit(expr.type);
        }
        else if (expr.kind === "NameReference") {
        }
        else if (expr.kind === "PropertyReference") {
            visit(expr.expression);
        }
        else if (expr.kind === "Sample") {
            visit(expr.scope);
        }
        else if (expr.kind === "Block") {
            (_g = expr.expressions) === null || _g === void 0 ? void 0 : _g.forEach(visit);
        }
        else if (expr.kind === "TypeDeclaration") {
            (_h = expr.extensions) === null || _h === void 0 ? void 0 : _h.forEach(visit);
            (_j = expr.genericArguments) === null || _j === void 0 ? void 0 : _j.forEach(visit);
            (_k = expr.properties) === null || _k === void 0 ? void 0 : _k.forEach(visit);
        }
        else if (expr.kind === "TypeParameter") {
            (_l = expr.constraints) === null || _l === void 0 ? void 0 : _l.forEach(visit);
        }
        else if (expr.kind === "TypeProperty") {
            visit(expr.type);
        }
        else if (expr.kind === "TypeReference") {
            (_m = expr.arguments) === null || _m === void 0 ? void 0 : _m.forEach(visit);
        }
    }
    function visit(node) {
        if (node !== undefined) {
            fn(node);
        }
    }
}
exports.visitEachChild = visitEachChild;
/**
 * Visit each property type and type's generic type in a Type and call a callback to process it.
 *
 * This function is a general purpose tool for building other recursive search functions.
 *
 * E.G.
 * ```
 * type myType {
 *   type1 id
 *   optional type2 name
 *   List<type3> hobbies
 * }
 *
 * visitEachChildType(myType) will visit [type1, Optional<type2>, List<type3>]
 *
 * visitEachChildType(List<type3>) will visit [type3]
 * ```
 * ```
 *
 * @param Type type to visit each child of
 * @param fn function to call with each child node
 */
function visitEachChildType(type, fn) {
    if (type !== undefined) {
        if (type.properties) {
            // if type have property, visit each properties' type
            type.properties.forEach((property) => {
                visit(property.type);
            });
        }
        if (type === null || type === void 0 ? void 0 : type.genericArguments) {
            // if type have generic type, visit each generic type
            type === null || type === void 0 ? void 0 : type.genericArguments.forEach((genericArgument) => {
                visit(genericArgument);
            });
        }
    }
    function visit(type) {
        if (type !== undefined) {
            fn(type);
        }
    }
}
exports.visitEachChildType = visitEachChildType;
/**
 * generic collect function
 * This function visit all child of the input Node, use provided fn to find target
 * and use provided reduce function to combine all found
 * @param node The Node where to collect target
 * @param fn function used to find target in the given Node
 * @param reduce function used to combine all founds
 * @param zero the initial result
 * @returns all the found targets after combination
 */
function collect(node, fn, reduce, zero) {
    let tmp = zero;
    visitEachChild(node, (n) => {
        tmp = reduce(tmp, fn(n));
    });
    return tmp;
}
exports.collect = collect;
/**
 * visit all child of a Node and collect all target in an array
 * @param node The Node where to collect target
 * @param fn function used to find target in the given Node
 * @returns an array of target
 */
function collectArray(node, fn) {
    return collect(node, fn, (a, b) => a.concat(b), []);
}
exports.collectArray = collectArray;
/**
 * Visit each child in a Node and transform it with the provided callback.
 *
 * This function is a general purpose tool for building other recursive compilation passes.
 *
 * @param node node to visit each child of
 * @param fn function to call with each child node
 */
function transformEachChild(expr, fn) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;
    if (expr !== undefined) {
        if (expr.kind === "ActionDeclaration" || expr.kind === "DialogDeclaration") {
            const returnType = visit(expr.returnType);
            const genericArguments = (_a = expr.genericArguments) === null || _a === void 0 ? void 0 : _a.map(visit);
            const args = (_b = expr.arguments) === null || _b === void 0 ? void 0 : _b.map(visit);
            const annotations = (_c = expr.annotations) === null || _c === void 0 ? void 0 : _c.map(visit);
            if (expr.kind === "DialogDeclaration") {
                const samples = (_d = expr.samples) === null || _d === void 0 ? void 0 : _d.map(visit);
                return new ask.DialogDeclaration(visit(expr.name), args, samples, returnType, genericArguments, annotations, expr.comment, expr.loc);
            }
            return new ask.ActionDeclaration(visit(expr.name), args, returnType, genericArguments, annotations, expr.comment, expr.loc);
        }
        if (expr.kind === "Argument") {
            return new ask.Argument(visit(expr.name), expr.index, visit(expr.value), expr.loc);
        }
        if (expr.kind === "ArgumentDeclaration") {
            return new ask.ArgumentDeclaration(visit(expr.name), visit(expr.type), visit(expr.defaultExpression), (_e = expr.annotations) === null || _e === void 0 ? void 0 : _e.map(visit), expr.comment, expr.loc);
        }
        if (expr.kind === "Call") {
            let args;
            if (Array.isArray(expr.arguments)) {
                args = expr.arguments.map(visit);
            }
            else if (ask.isListLiteral(expr.arguments)) {
                args = visit(expr.arguments);
            }
            else {
                args = expr.arguments;
            }
            return new ask.Call(visit(expr.name), args, (_f = expr.genericArguments) === null || _f === void 0 ? void 0 : _f.map(visit), (_g = expr.annotations) === null || _g === void 0 ? void 0 : _g.map(visit), expr.loc);
        }
        if (expr.kind === "Condition") {
            return new ask.Condition(visit(expr.when), visit(expr.then), visit(expr.else), (_h = expr.annotations) === null || _h === void 0 ? void 0 : _h.map(visit), expr.loc);
        }
        if (expr.kind === "ListItem") {
            return new ask.ListItem(visit(expr.item), expr.index, expr.loc);
        }
        if (expr.kind === "ListLiteral") {
            return new ask.ListLiteral((_j = expr.items) === null || _j === void 0 ? void 0 : _j.map(visit), expr.loc);
        }
        if (expr.kind === "Module") {
            return new ask.Module(expr.uri, expr.schema, (_k = expr.namespace) === null || _k === void 0 ? void 0 : _k.clone(), (_l = expr.imports) === null || _l === void 0 ? void 0 : _l.map((i) => i.clone()), expr.exports, (_m = expr.expressions) === null || _m === void 0 ? void 0 : _m.map(visit), expr.loc);
        }
        if (expr.kind === "NameDeclaration") {
            return new ask.NameDeclaration(visit(expr.name), visit(expr.type), visit(expr.expression), (_o = expr.annotations) === null || _o === void 0 ? void 0 : _o.map(visit), expr.comment, expr.loc);
        }
        if (expr.kind === "NameReference") {
            return new ask.NameReference(visit(expr.name), (_p = expr.annotations) === null || _p === void 0 ? void 0 : _p.map(visit), expr.loc);
        }
        if (expr.kind === "PropertyReference") {
            return new ask.PropertyReference(visit(expr.name), visit(expr.expression), (_q = expr.annotations) === null || _q === void 0 ? void 0 : _q.map(visit), expr.loc);
        }
        if (expr.kind === "Sample") {
            return new ask.Sample(visit(expr.scope), (_r = expr.annotations) === null || _r === void 0 ? void 0 : _r.map(visit), expr.loc);
        }
        if (expr.kind === "Block") {
            const clazz = expr instanceof ask.ThenScope ? ask.ThenScope : expr instanceof ask.ElseScope ? ask.ElseScope : ask.Block;
            return new clazz((_s = expr.expressions) === null || _s === void 0 ? void 0 : _s.map(visit), expr.loc);
        }
        if (expr.kind === "TypeDeclaration") {
            return new ask.TypeDeclaration(visit(expr.name), (_t = expr.properties) === null || _t === void 0 ? void 0 : _t.map(visit), (_u = expr.genericArguments) === null || _u === void 0 ? void 0 : _u.map(visit), (_v = expr.extensions) === null || _v === void 0 ? void 0 : _v.map(visit), (_w = expr.annotations) === null || _w === void 0 ? void 0 : _w.map(visit), expr.comment, expr.loc);
        }
        if (expr.kind === "TypeParameter") {
            return new ask.TypeParameter(visit(expr.name), (_x = expr.constraints) === null || _x === void 0 ? void 0 : _x.map(visit), expr.loc);
        }
        if (expr.kind === "TypeProperty") {
            return new ask.TypeProperty(visit(expr.name), visit(expr.type), expr.optional, (_y = expr.annotations) === null || _y === void 0 ? void 0 : _y.map(visit), expr.comment, expr.loc);
        }
        if (expr.kind === "TypeReference") {
            return new ask.TypeReference(visit(expr.name), (_z = expr.arguments) === null || _z === void 0 ? void 0 : _z.map(visit), (_0 = expr.annotations) === null || _0 === void 0 ? void 0 : _0.map(visit), expr.functionArgumentNames, expr.loc);
        }
        return expr.clone();
    }
    return undefined;
    function visit(node) {
        if (node !== undefined) {
            return fn(node);
        }
        return undefined;
    }
}
exports.transformEachChild = transformEachChild;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdmlzaXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FBNkI7QUFFN0I7Ozs7Ozs7R0FPRztBQUNILFNBQWdCLGNBQWMsQ0FBQyxJQUEwQixFQUFFLEVBQTRCOztJQUNyRixJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7UUFDdEIsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLG1CQUFtQixJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssbUJBQW1CLEVBQUU7WUFDMUUsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN2QixNQUFBLElBQUksQ0FBQyxnQkFBZ0IsMENBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLE1BQUEsSUFBSSxDQUFDLFNBQVMsMENBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQy9CLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxtQkFBbUIsRUFBRTtnQkFDckMsTUFBQSxJQUFJLENBQUMsT0FBTywwQ0FBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDOUI7U0FDRjthQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxVQUFVLEVBQUU7WUFDbkMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNuQjthQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxxQkFBcUIsRUFBRTtZQUM5QyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pCLEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztTQUMvQjthQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUU7WUFDL0IsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTtnQkFDakMsSUFBSSxD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