"use strict";
var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
};
var _EnumDeclaration_itemsIndex;
Object.defineProperty(exports, "__esModule", { value: true });
exports.EnumItem = exports.EnumDeclaration = void 0;
const tree_1 = require("./tree");
/**
 * Represents an enum type declaration.
 * ```acdl
 * enum Locale {
 *   en_US
 *   de_DE
 * }
 * ```
 */
class EnumDeclaration extends tree_1.Tree {
    constructor(
    /**
     * Name of the Enum Type, e.g. `org.example.Locale`.
     */
    name, 
    /**
     * List of items in this Enum Type.
     */
    items, 
    /**
     * Annotations attached to this Enum Declaration.
     */
    annotations, comment, loc) {
        super("EnumDeclaration", loc);
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: name
        });
        Object.defineProperty(this, "items", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: items
        });
        Object.defineProperty(this, "annotations", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: annotations
        });
        Object.defineProperty(this, "comment", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: comment
        });
        _EnumDeclaration_itemsIndex.set(this, void 0);
        this.setAsParentOn(name);
        this.setAsParentOn(items);
        this.setAsParentOn(annotations);
    }
    /**
     * Map of Name to EnumItem.
     *
     * Values are lazily computed to preserve memory.
     */
    get itemsIndex() {
        var _a;
        if (__classPrivateFieldGet(this, _EnumDeclaration_itemsIndex, "f") === undefined) {
            __classPrivateFieldSet(this, _EnumDeclaration_itemsIndex, this.items
                ? Object.entries(this.items)
                    .map(([name, item]) => ({
                    [name]: item.clone(),
                }))
                    .reduce((a, b) => ({ ...a, ...b }), {})
                : null, "f");
        }
        return (_a = __classPrivateFieldGet(this, _EnumDeclaration_itemsIndex, "f")) !== null && _a !== void 0 ? _a : undefined;
    }
    clone() {
        var _a, _b, _c;
        return new EnumDeclaration((_a = this.name) === null || _a === void 0 ? void 0 : _a.clone(), (_b = this.items) === null || _b === void 0 ? void 0 : _b.map((item) => item.clone()), (_c = this.annotations) === null || _c === void 0 ? void 0 : _c.map((item) => item.clone()), this.comment, this.loc);
    }
}
exports.EnumDeclaration = EnumDeclaration;
_EnumDeclaration_itemsIndex = new WeakMap();
/**
 * Tree ndoe to represent an EnumItem.
 */
class EnumItem extends tree_1.Tree {
    constructor(
    /**
     * Name of the Enum Item, e.g. `en_US` in:
     * ```acdl
     * enum Locale {
     *   en_US
     * }
     * ```
     */
    name, 
    /**
     * Annotations attached to this Enum Item Declaration.
     */
    annotations, comment, loc) {
        super("EnumItemDeclaration", loc);
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: name
        });
        Object.defineProperty(this, "annotations", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: annotations
        });
        Object.defineProperty(this, "comment", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: comment
        });
        this.setAsParentOn(name);
        this.setAsParentOn(annotations);
    }
    clone() {
        var _a;
        return new EnumItem(this.name, (_a = this.annotations) === null || _a === void 0 ? void 0 : _a.map((a) => a.clone()), this.comment, this.loc);
    }
}
exports.EnumItem = EnumItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW51bS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hc3QvZW51bS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFFQSxpQ0FBNEI7QUFHNUI7Ozs7Ozs7O0dBUUc7QUFDSCxNQUFhLGVBQWdCLFNBQVEsV0FBdUI7SUFDMUQ7SUFDRTs7T0FFRztJQUNNLElBQXNCO0lBQy9COztPQUVHO0lBQ00sS0FBNkI7SUFDdEM7O09BRUc7SUFDTSxXQUFxQyxFQUNyQyxPQUFnQixFQUN6QixHQUFnQztRQUVoQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLENBQUM7Ozs7O21CQVpyQjs7Ozs7O21CQUlBOzs7Ozs7bUJBSUE7Ozs7OzttQkFDQTs7UUFTWCw4Q0FBMEM7UUFMeEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFCLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUlEOzs7O09BSUc7SUFDSCxJQUFXLFVBQVU7O1FBQ25CLElBQUksdUJBQUEsSUFBSSxtQ0FBWSxLQUFLLFNBQVMsRUFBRTtZQUNsQyx1QkFBQSxJQUFJLCtCQUFlLElBQUksQ0FBQyxLQUFLO2dCQUMzQixDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO3FCQUN2QixHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDdEIsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFO2lCQUNyQixDQUFDLENBQUM7cUJBQ0YsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ3pDLENBQUMsQ0FBQyxJQUFJLE1BQUEsQ0FBQztTQUNWO1FBQ0QsT0FBTyxNQUFBLHVCQUFBLElBQUksbUNBQVksbUNBQUksU0FBUyxDQUFDO0lBQ3ZDLENBQUM7SUFFTSxLQUFLOztRQUNWLE9BQU8sSUFBSSxlQUFlLENBQ3hCLE1BQUEsSUFBSSxDQUFDLElBQUksMENBQUUsS0FBSyxFQUFFLEVBQ2xCLE1BQUEsSUFBSSxDQUFDLEtBQUssMENBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFDdkMsTUFBQSxJQUFJLENBQUMsV0FBVywwQ0FBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUM3QyxJQUFJLENBQUMsT0FBTyxFQUNaLElBQUksQ0FBQyxHQUFHLENBQ0QsQ0FBQztJQUNaLENBQUM7Q0FDRjtBQXBERCwwQ0FvREM7O0FBU0Q7O0dBRUc7QUFDSCxNQUFhLFFBQVMsU0FBUSxXQUE0QztJQUN4RTtJQUNFOzs7Ozs7O09BT0c7SUFDTSxJQUFzQjtJQUMvQjs7T0FFRztJQUNNLFdBQXFDLEVBQ3JDLE9BQWdCLEVBQ3pCLEdBQWdDO1FBRWhDLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLENBQUMsQ0FBQzs7Ozs7bUJBUnpCOzs7Ozs7bUJBSUE7Ozs7OzttQkFDQTs7UUFJVCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVNLEtBQUs7O1FBQ1YsT0FBTyxJQUFJLFFBQVEsQ0FDakIsSUFBSSxDQUFDLElBQUksRUFDVCxNQUFBLElBQUksQ0FBQyxXQUFXLDBDQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQ3ZDLElBQUksQ0FBQyxPQUFPLEVBQ1osSUFBSSxDQUFDLEdBQUcsQ0FDRCxDQUFDO0lBQ1osQ0FBQztDQUNGO0FBL0JELDRCQStCQyJ9