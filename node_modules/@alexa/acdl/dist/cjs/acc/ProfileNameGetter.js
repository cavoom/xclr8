"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProfileNameGetter = void 0;
const fs = require("fs-extra");
const os = require("os");
const path = require("path");
const __ENVIRONMENT_ASK_PROFILE__ = "__ENVIRONMENT_ASK_PROFILE__";
/**
 * Class that helps to get the name of the current ASK profile
 */
class ProfileNameGetter {
    /**
     * get the name of the current ASK profile
     * @param profile profile from the command line
     * @returns the name of the current ASK profile
     */
    static getProfileName(profile) {
        const profileName = profile || ProfileNameGetter.getEnvProfile() || process.env.ASK_DEFAULT_PROFILE || "default";
        return profileName;
    }
    /**
     * Returns true if all the needed variables are set or false otherwise
     * @returns __ENVIRONMENT_ASK_PROFILE__ if all the needed variables are set or undefined otherwise
     */
    static isEnvProfile() {
        return !!(process.env.AWS_ACCESS_KEY_ID &&
            process.env.AWS_SECRET_ACCESS_KEY &&
            (process.env.ASK_REFRESH_TOKEN || process.env.ASK_ACCESS_TOKEN) &&
            process.env.ASK_VENDOR_ID);
    }
    /**
     * Returns __ENVIRONMENT_ASK_PROFILE__ if all the needed variables are set or undefined otherwise
     * @returns __ENVIRONMENT_ASK_PROFILE__ if all the needed variables are set or undefined otherwise
     */
    static getEnvProfile() {
        // Only when user set every required parameter in ENV, we will treat profile as ENV
        if (ProfileNameGetter.isEnvProfile()) {
            // Only when user set every required parameter in ENV, we will treat profile as ENV
            return __ENVIRONMENT_ASK_PROFILE__;
        }
        return null;
    }
}
exports.ProfileNameGetter = ProfileNameGetter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvZmlsZU5hbWVHZXR0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYWNjL1Byb2ZpbGVOYW1lR2V0dGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMvQixNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekIsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBRTdCLE1BQU0sMkJBQTJCLEdBQUcsNkJBQTZCLENBQUM7QUFFbEU7O0dBRUc7QUFDSCxNQUFhLGlCQUFpQjtJQUM1Qjs7OztPQUlHO0lBQ0ksTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUEyQjtRQUN0RCxNQUFNLFdBQVcsR0FBRyxPQUFPLElBQUksaUJBQWlCLENBQUMsYUFBYSxFQUFFLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsSUFBSSxTQUFTLENBQUM7UUFDakgsT0FBTyxXQUFXLENBQUM7SUFDckIsQ0FBQztJQUVEOzs7T0FHRztJQUNJLE1BQU0sQ0FBQyxZQUFZO1FBQ3hCLE9BQU8sQ0FBQyxDQUFDLENBQ1AsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUI7WUFDN0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUI7WUFDakMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUM7WUFDL0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQzFCLENBQUM7SUFDSixDQUFDO0lBRUQ7OztPQUdHO0lBQ0ssTUFBTSxDQUFDLGFBQWE7UUFDMUIsbUZBQW1GO1FBQ25GLElBQUksaUJBQWlCLENBQUMsWUFBWSxFQUFFLEVBQUU7WUFDcEMsbUZBQW1GO1lBQ25GLE9BQU8sMkJBQTJCLENBQUM7U0FDcEM7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7Q0FDRjtBQXBDRCw4Q0FvQ0MifQ==