"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Project = exports.validateLoadedModules = exports.loadProject = exports.loadProjectSync = void 0;
const path_1 = __importDefault(require("path"));
const ask = __importStar(require("./ast"));
const package_1 = require("./package");
const checker_1 = require("./checker");
const constants_1 = require("./constants");
const visit_1 = require("./visit");
const transformUIProject_1 = require("./transformUIProject");
const transform_project_1 = require("./transform-project");
const interaction_model_generator_1 = require("./interaction-model-generator");
const ast_1 = require("./ast");
/**
 * Synchronously load a Project from the file system.
 *
 * @param config project configuration
 */
function loadProjectSync(config) {
    const external = (0, package_1.scanPackagesSync)(path_1.default.join(config.rootDir, "node_modules"));
    if (config.name !== constants_1.Constants.AlexaSchemaPackageName && config.name !== constants_1.Constants.ACCorePackageName) {
        // if we're compiling a package that doesn't have `@alexa/schema` or `@alexa/ac-core`, load them from the bundled libs.
        const packages = new Set(external.map((e) => { var _a; return (_a = e.config) === null || _a === void 0 ? void 0 : _a.name; }).filter((n) => n !== undefined));
        if (!packages.has(constants_1.Constants.AlexaSchemaPackageName)) {
            external.push((0, package_1.loadBundledPackageSync)("schema"));
        }
        if (!packages.has(constants_1.Constants.ACCorePackageName)) {
            external.push((0, package_1.loadBundledPackageSync)("ac-core"));
        }
    }
    const source = (0, package_1.loadPackageSync)(config.rootDir, undefined, true);
    if (source === undefined) {
        throw new Error(`Failed to load project from '${config.rootDir}'.'`);
    }
    const project = new Project({
        config,
        source,
        external: validateLoadedModules(external),
    });
    const { isUISkill } = (0, transformUIProject_1.getUISkillInformation)(project.sourceModules);
    if (isUISkill) {
        return project;
    }
    return (0, transform_project_1.transformProject)(project);
}
exports.loadProjectSync = loadProjectSync;
/**
 * Asynchronously load a Project from the file system.
 *
 * @param config project configuration
 * @param skipFSPackageConfig true if we should use config when calling loadPackage as opposed to loading the configuration from FS
 */
async function loadProject(config, skipFSPackageConfig = false) {
    const external = await (0, package_1.scanPackages)(path_1.default.join(config.rootDir, "node_modules"));
    if (config.name !== constants_1.Constants.AlexaSchemaPackageName && config.name !== constants_1.Constants.ACCorePackageName) {
        // if we're compiling a package that doesn't have `@alexa/schema` or `@alexa/ac-core`, load them from the bundled libs.
        const packages = new Set(external.map((e) => { var _a; return (_a = e.config) === null || _a === void 0 ? void 0 : _a.name; }).filter((n) => n !== undefined));
        if (!packages.has(constants_1.Constants.AlexaSchemaPackageName)) {
            external.push(await (0, package_1.loadBundledPackage)("schema"));
        }
        if (!packages.has(constants_1.Constants.ACCorePackageName)) {
            external.push(await (0, package_1.loadBundledPackage)("ac-core"));
        }
    }
    const source = await (0, package_1.loadPackage)(config.rootDir, skipFSPackageConfig ? { ask: config, name: config.name || "", version: config.projectVersion } : undefined, true);
    if (source === undefined) {
        throw new Error(`Failed to load project from '${config.rootDir}'.'`);
    }
    const project = new Project({
        config,
        source,
        external: validateLoadedModules(external),
    });
    const { isUISkill } = (0, transformUIProject_1.getUISkillInformation)(project.sourceModules);
    if (isUISkill) {
        return project;
    }
    return (0, transform_project_1.transformProject)(project);
}
exports.loadProject = loadProject;
/**
 * validate loaded modules
 * 1. for same module with same version, ignore the second one to avoid duplicates
 * 2. for same module with different version, report error
 * @param modules
 * @returns
 */
function validateLoadedModules(modules) {
    const result = [];
    const moduleMap = new Map(); // name - version
    modules.forEach((module) => {
        var _a;
        if (((_a = module.config) === null || _a === void 0 ? void 0 : _a.name) && module.config.version) {
            if (!moduleMap.has(module.config.name)) {
                result.push(module);
                moduleMap.set(module.config.name, module.config.version);
            }
            else if (moduleMap.get(module.config.name) !== module.config.version) {
                throw new Error(`Failed to load project, found same module '${module.config.name}' with different versions '${moduleMap.get(module.config.name)}', '${module.config.version}'.`);
            }
        }
    });
    return result;
}
exports.validateLoadedModules = validateLoadedModules;
function indexModules(modules) {
    return modules.map((f) => ({ [f.uri]: f })).reduce((a, b) => ({ ...a, ...b }), {});
}
/**
 * Parsed ACDL Project.
 */
class Project {
    constructor(props) {
        var _a, _b;
        /**
         * Project Configuration.
         */
        Object.defineProperty(this, "config", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "responseTemplates", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "slotTypes", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "source", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "external", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "externalIndex", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "sourceIndex", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * List of named call declarations indicated by an {@link ask.NameDeclaration} pointing to a {@link Apply} data structure
         */
        Object.defineProperty(this, "callDeclarations", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * The Global TypeChecker environment for this Project.
         */
        Object.defineProperty(this, "checker", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * Globally cached {@link PolicyInfo} for the configured Skill.
         */
        Object.defineProperty(this, "policyInfo", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * Globally cached root {@link ask.DialogDeclaration} instances. By root, we mean
         * the dialogs that constitute the entry-point of the skill.
         */
        Object.defineProperty(this, "rootDialogs", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.config = props.config;
        this.source = props.source;
        this.external = props.external;
        this.sourceIndex = indexModules(props.source.modules);
        this.externalIndex = indexModules(this.external.flatMap((p) => p.modules));
        this.responseTemplates = (_a = this.source.responseTemplates) !== null && _a !== void 0 ? _a : [];
        this.callDeclarations = new Map();
        const combinedSlotTypes = {};
        const allSlotTypes = [...((_b = props.source.slotTypes) !== null && _b !== void 0 ? _b : []), ...props.external.flatMap((pkg) => { var _a; return (_a = pkg.slotTypes) !== null && _a !== void 0 ? _a : []; })];
        allSlotTypes.forEach((slotType) => {
            if (slotType.name.name) {
                const existingSlotType = combinedSlotTypes[slotType.name.name];
                if (existingSlotType !== undefined) {
                    slotType = new ask.SlotType(slotType.name, [...slotType.locales, ...existingSlotType.locales]);
                }
                combinedSlotTypes[slotType.name.name] = slotType;
            }
        });
        this.slotTypes = Object.values(combinedSlotTypes).map((slotType) => new ask.SlotType(slotType.name, Array.from(new Set(slotType.locales))));
    }
    get modules() {
        return [...this.externalModules, ...this.sourceModules];
    }
    get externalModules() {
        return Object.values(this.externalIndex);
    }
    get sourceModules() {
        return Object.values(this.sourceIndex);
    }
    getModule(uri) {
        return this.sourceIndex[uri] || this.externalIndex[uri];
    }
    clearCaches() {
        this.checker = undefined;
        this.policyInfo = undefined;
        this.rootDialogs = undefined;
        this.callDeclarations = new Map();
    }
    remove(uri) {
        delete this.sourceIndex[uri];
        delete this.externalIndex[uri];
        this.clearCaches();
    }
    isSource(uri) {
        for (const src of this.config.srcDir) {
            if (uri.startsWith(path_1.default.resolve(this.config.rootDir, src))) {
                return true;
            }
        }
        return false;
    }
    update(module) {
        if (this.isSource(module.uri)) {
            this.sourceIndex[module.uri] = module;
        }
        else {
            this.externalIndex[module.uri] = module;
        }
        this.clearCaches();
    }
    getTypeChecker() {
        if (this.checker === undefined) {
            this.checker = new checker_1.TypeChecker(this);
        }
        return this.checker;
    }
    /**
     * Check whether a project is a library
     * A library should not have the main property inside ask config
     */
    isLibrary() {
        return this.config.skill === undefined && this.config.projectVersion !== package_1.ProjectVersion.Beta1;
    }
    /**
     * check whether a project is a skill
     * A skill must provide the main property inside ask config
     */
    isSkill() {
        return this.config.skill !== undefined || this.config.projectVersion === package_1.ProjectVersion.Beta1;
    }
    /**
     * Find all skill actions used in project
     * @return An array of declaration and apply of all skill actions
     */
    findSkills() {
        return this.findCallDeclarations(ast_1.AlexaConversations.skill, true);
    }
    findCallDeclarations(callName, nameRequired) {
        var _a, _b, _c, _d, _e, _f;
        const checker = this.getTypeChecker();
        const cachedCallDeclarations = this.callDeclarations.get(callName);
        if (cachedCallDeclarations !== undefined) {
            return cachedCallDeclarations;
        }
        const callDeclarations = [];
        for (const module of this.modules) {
            if ((_a = module.content) === null || _a === void 0 ? void 0 : _a.expressions) {
                for (const expression of module.content.expressions) {
                    if (expression.kind === "NameDeclaration" &&
                        ((_b = expression.expression) === null || _b === void 0 ? void 0 : _b.kind) === "Call" &&
                        ((_d = (_c = checker.getApply(expression.expression)) === null || _c === void 0 ? void 0 : _c.decl.name) === null || _d === void 0 ? void 0 : _d.name) === callName) {
                        callDeclarations.push({
                            declaration: expression,
                            apply: checker.getApply(expression.expression),
                        });
                    }
                    else if (!nameRequired && expression.kind === "Call" && ((_f = (_e = checker.getApply(expression)) === null || _e === void 0 ? void 0 : _e.decl.name) === null || _f === void 0 ? void 0 : _f.name) === callName) {
                        callDeclarations.push({
                            apply: checker.getApply(expression),
                        });
                    }
                }
            }
        }
        this.callDeclarations.set(callName, callDeclarations);
        return callDeclarations;
    }
    isRootDialog(dialog) {
        var _a;
        return ((_a = this.getRootDialogs()) === null || _a === void 0 ? void 0 : _a.find((d) => d === dialog)) !== undefined;
    }
    /**
     * Get all dialogs in the Skill.
     */
    getAllDialogs() {
        return this.modules.flatMap((module) => { var _a, _b; return ((_b = (_a = module.content) === null || _a === void 0 ? void 0 : _a.expressions) !== null && _b !== void 0 ? _b : []).flatMap((expr) => (expr.kind === "DialogDeclaration" ? [expr] : [])); });
    }
    /**
     * Get the dialogs that are the skill's entry-point.
     *
     * This is computed in various different ways.
     * 1. when skill action exist and dialogs array provided, will read dialogs in the dialog array
     * 2. if skill action not exist or dialog array not exist, will traverse all the dialogs and filter out root dialogs by
     *   Condition 1. The dialog must use Nothing return type and has no arguments
     *   Condition 2. The dialog must not been called in other dialogs
     */
    getRootDialogs() {
        var _a;
        if (this.rootDialogs === undefined) {
            const project = this;
            const checker = this.getTypeChecker();
            const skills = this.findSkills();
            if (skills.length === 1) {
                // when only one skill action provided
                const dialogs = skills[0].apply.getArgumentValueThing("dialogs");
                if (dialogs !== undefined && (dialogs === null || dialogs === void 0 ? void 0 : dialogs.isList()) && dialogs.isLiteral()) {
                    // when skill action exist and the dialogs array is not undefined
                    // The compiler prioritize all the dialogs in the dialogs array
                    const dialogItems = dialogs.getItems();
                    const allDialogs = new Set(dialogItems === null || dialogItems === void 0 ? void 0 : dialogItems.map((dialogItem) => {
                        if (dialogItem === null || dialogItem === void 0 ? void 0 : dialogItem.isDialog()) {
                            return dialogItem.origin;
                        }
                        return undefined;
                    }));
                    this.rootDialogs = Array.from(allDialogs).filter((dialog) => dialog !== undefined);
                    return this.rootDialogs.length > 0 ? this.rootDialogs : undefined;
                }
            }
            const allDialogs = this.getAllDialogs();
            // find all dialogs that have nothing return type and have no arguments
            const rootDialogCandidates = allDialogs.filter((dialog) => {
                const returnType = checker.getType(dialog.returnType);
                return (dialog.arguments === undefined || dialog.arguments.length === 0) && ((returnType === null || returnType === void 0 ? void 0 : returnType.isVoid()) || (returnType === null || returnType === void 0 ? void 0 : returnType.isNothing()));
            });
            // find all dialogs that has been called or passed as an argument in other dialogs
            const calledDialogs = new Set();
            allDialogs === null || allDialogs === void 0 ? void 0 : allDialogs.forEach((dialog) => {
                var _a;
                return (_a = dialog.samples) === null || _a === void 0 ? void 0 : _a.forEach((sample) => {
                    var _a, _b;
                    return (_b = (_a = sample.scope) === null || _a === void 0 ? void 0 : _a.expressions) === null || _b === void 0 ? void 0 : _b.forEach(function findCalledDialogs(node) {
                        if (node.kind === "Call") {
                            const apply = project.getTypeChecker().getApply(node);
                            if (apply === null || apply === void 0 ? void 0 : apply.isDialog()) {
                                calledDialogs.add(apply.decl.kind === "DialogDeclaration" ? apply.decl : apply.decl.declaration);
                                const argumentsThings = apply.getArgumentValueThingList();
                                argumentsThings.forEach((argumentThing) => {
                                    if (argumentThing === null || argumentThing === void 0 ? void 0 : argumentThing.isDialog()) {
                                        calledDialogs.add(argumentThing.origin);
                                    }
                                });
                            }
                        }
                        (0, visit_1.visitEachChild)(node, findCalledDialogs);
                    });
                });
            });
            this.rootDialogs = Array.from(rootDialogCandidates.filter((dialog) => !calledDialogs.has(dialog)));
        }
        return (_a = this.rootDialogs) !== null && _a !== void 0 ? _a : undefined;
    }
    /**
     * Read the policy definitions defined in the skill action and converts
     * the PolicyInfo into a more readable structure
     *
     * e.g.
     * ```
     * namespace test
     * policies = [ResetArguments{arguments = [getWeather.arguments.cityName, getWeather.arguments.date]}, ResetAllArguments {action = getWeather2}]
     *
     * getPolicyInfo => Map {
     *    test.getWeather: {
     *        type: "ResetArguments",
     *        actionFqn: "test.getWeather",
     *        arguments: ["cityName", "date"]
     *    },
     *    test.getWeather2: {
     *        type: "ResetAllArguments",
     *        actionFqn: "test.getWeather2",
     *        arguments: []
     *    }
     * }
     * ```
     */
    getPolicyInfo() {
        if (this.policyInfo !== undefined) {
            return this.policyInfo;
        }
        const skills = this.findSkills();
        if (skills.length !== 1) {
            return undefined;
        }
        this.policyInfo = new Map();
        const policies = skills[0].apply.getArgumentValueThing("policies");
        const policyItems = (policies === null || policies === void 0 ? void 0 : policies.isList()) && policies.isLiteral() ? policies.getItems() : [];
        policyItems === null || policyItems === void 0 ? void 0 : policyItems.forEach((item) => {
            var _a, _b, _c;
            if ((_a = item === null || item === void 0 ? void 0 : item.apply) === null || _a === void 0 ? void 0 : _a.isResetArguments()) {
                const argumentsValueThing = item.getProperty("arguments");
                if ((argumentsValueThing === null || argumentsValueThing === void 0 ? void 0 : argumentsValueThing.isLiteral()) && argumentsValueThing.isList()) {
                    const items = argumentsValueThing.getItems();
                    items === null || items === void 0 ? void 0 : items.forEach((item) => {
                        var _a, _b, _c, _d, _e;
                        if ((_b = (_a = item === null || item === void 0 ? void 0 : item.parent) === null || _a === void 0 ? void 0 : _a.parent) === null || _b === void 0 ? void 0 : _b.isAction()) {
                            const { actionName } = item.parent.parent;
                            if (actionName && ((_c = item.origin) === null || _c === void 0 ? void 0 : _c.kind) === "Name" && item.origin.name) {
                                if (!this.policyInfo.has(actionName)) {
                                    this.policyInfo.set(actionName, {
                                        type: "ResetArguments",
                                        actionFqn: actionName,
                                        arguments: [item.origin.name],
                                    });
                                }
                                else if (this.policyInfo.has(actionName)) {
                                    (_e = (_d = this.policyInfo.get(actionName)) === null || _d === void 0 ? void 0 : _d.arguments) === null || _e === void 0 ? void 0 : _e.push(item.origin.name);
                                }
                            }
                        }
                    });
                }
            }
            else if ((_b = item === null || item === void 0 ? void 0 : item.apply) === null || _b === void 0 ? void 0 : _b.isResetAllArguments()) {
                const actionThing = item.getProperty("action");
                if (actionThing === null || actionThing === void 0 ? void 0 : actionThing.isAction()) {
                    const actionName = (_c = actionThing.name) === null || _c === void 0 ? void 0 : _c.name;
                    if (actionName) {
                        this.policyInfo.set(actionName, {
                            type: "ResetAllArguments",
                            actionFqn: actionName,
                            arguments: [],
                        });
                    }
                }
            }
        });
        return this.policyInfo;
    }
    generateInteractionModels() {
        const extendCatalogActions = this.findCallDeclarations(ast_1.AlexaConversations.extendCatalog, false);
        return new interaction_model_generator_1.InteractionModelGenerator().generateInteractionModels(this.findSkills(), extendCatalogActions);
    }
}
exports.Project = Project;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wcm9qZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsZ0RBQXdCO0FBQ3hCLDJDQUE2QjtBQUc3Qix1Q0FVbUI7QUFFbkIsdUNBQWtEO0FBQ2xELDJDQUFzQztBQUN0QyxtQ0FBdUM7QUFFdkMsNkRBQTJEO0FBQzNELDJEQUFxRDtBQUNyRCwrRUFBd0U7QUFDeEUsK0JBQWlEO0FBR2pEOzs7O0dBSUc7QUFDSCxTQUFnQixlQUFlLENBQUMsTUFBcUI7SUFDbkQsTUFBTSxRQUFRLEdBQUcsSUFBQSwwQkFBZ0IsRUFBQyxjQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsY0FBYyxDQUFDLENBQUMsQ0FBQztJQUM3RSxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUsscUJBQVMsQ0FBQyxzQkFBc0IsSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLHFCQUFTLENBQUMsaUJBQWlCLEVBQUU7UUFDbkcsdUhBQXVIO1FBQ3ZILE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxXQUFDLE9BQUEsTUFBQSxDQUFDLENBQUMsTUFBTSwwQ0FBRSxJQUFLLENBQUEsRUFBQSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUM5RixJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxxQkFBUyxDQUFDLHNCQUFzQixDQUFDLEVBQUU7WUFDbkQsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFBLGdDQUFzQixFQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDakQ7UUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxxQkFBUyxDQUFDLGlCQUFp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