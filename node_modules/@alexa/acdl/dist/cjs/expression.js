"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConditionalBranch = exports.Ensure = exports.ConfirmAction = exports.ConfirmArgs = exports.DelegateToIntent = exports.DelegateRequest = exports.Response = exports.Expect = exports.DialogExpansion = exports.InvokeApi = exports.ActionExpression = exports.FunctionExpression = exports.BlockExpression = exports.End = exports.Start = void 0;
class BaseExpression {
    constructor(prev, flow) {
        var _a, _b;
        Object.defineProperty(this, "prev", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: prev
        });
        Object.defineProperty(this, "flow", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: flow
        });
        Object.defineProperty(this, "kind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * A reference to the Type Environment this Expression belongs in.
         */
        Object.defineProperty(this, "checker", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * The exact ASKIR Expression node which expressed this Expression.
         */
        Object.defineProperty(this, "node", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * Sourece Code Location of the Call representing this Expression.
         */
        Object.defineProperty(this, "loc", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * Source Code URI of the code containing this Expression.
         */
        Object.defineProperty(this, "uri", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.node = flow.expression;
        this.checker = flow.checker;
        this.loc = (_a = flow.expression) === null || _a === void 0 ? void 0 : _a.loc;
        this.uri = (_b = flow.expression) === null || _b === void 0 ? void 0 : _b.uri;
    }
    isAction() {
        return this instanceof ActionExpression;
    }
    isBlock() {
        return this instanceof BlockExpression;
    }
    isConditionalBranch() {
        return this instanceof ConditionalBranch;
    }
    isConfirmAction() {
        return this instanceof ConfirmAction;
    }
    isConfirmArgs() {
        return this instanceof ConfirmArgs;
    }
    isDialogExpansion() {
        return this instanceof DialogExpansion;
    }
    isEnsure() {
        return this instanceof Ensure;
    }
    isExpect() {
        return this instanceof Expect;
    }
    isEnd() {
        return this instanceof End;
    }
    isInvokeApi() {
        return this instanceof InvokeApi;
    }
    isResponse() {
        return this instanceof Response;
    }
    isStart() {
        return this instanceof Start;
    }
    isDelegateToIntent() {
        return this instanceof DelegateToIntent;
    }
    isDelegateRequest() {
        return this instanceof DelegateRequest;
    }
    /**
     * Expressions that can come after a delegation call.
     */
    canFollowDelegation() {
        return this.isExpect() || this.isEnd() || this.isDialogExpansion() || this.isBlock() || this.isConditionalBranch();
    }
}
/**
 * Represents the Start of a Dialog Flow. This is usually used to detect the beginning
 * when traversing back through the Stack of previously received Expressions. It is
 * always the first expression in a {@link Flow.interpret} stream.
 */
class Start extends BaseExpression {
    constructor(prev, flow) {
        super(prev, flow);
        Object.defineProperty(this, "kind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Start"
        });
    }
}
exports.Start = Start;
/**
 * Represents the End of a Dialog Flow. This Expression is the last Expression you'll ever
 * receive in a {@link Flow.interpret} stream. Use this to finalize evaluation of the Expression
 * stream.
 */
class End extends BaseExpression {
    constructor(prev, flow) {
        super(prev, flow);
        Object.defineProperty(this, "kind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "End"
        });
    }
}
exports.End = End;
/**
 * Represents entering a Block.
 */
class BlockExpression extends BaseExpression {
    constructor(prev, flow) {
        super(prev, flow);
        Object.defineProperty(this, "kind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Block"
        });
    }
}
exports.BlockExpression = BlockExpression;
class FunctionExpression extends BaseExpression {
    constructor(prev, flow, 
    /**
     * The Function to call.
     */
    func, 
    /**
     * Optional name-value pairs for the Arguments passed to the API.
     */
    args) {
        super(prev, flow);
        Object.defineProperty(this, "func", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: func
        });
        Object.defineProperty(this, "arguments", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "apply", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.arguments = args;
        this.apply = flow.checker.getApply(this.node);
    }
}
exports.FunctionExpression = FunctionExpression;
/**
 * A Call to any Action (apis, built-ins, etc.).
 */
class ActionExpression extends FunctionExpression {
    constructor(prev, flow, 
    /**
     * The API's Action to call.
     */
    action, 
    /**
     * Optional name-value pairs for the Arguments passed to the API.
     */
    args) {
        super(prev, flow, action, args);
        Object.defineProperty(this, "action", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: action
        });
        Object.defineProperty(this, "kind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Action"
        });
    }
}
exports.ActionExpression = ActionExpression;
/**
 * Invoke of an external API Action.
 *
 * ```
 * action String foo(String arg)
 * // ..
 * f = foo("hello")
 * ```
 */
class InvokeApi extends ActionExpression {
    constructor(prev, flow, 
    /**
     * The API's Action to call.
     */
    action, 
    /**
     * Name-value pairs for the Arguments passed to the API.
     */
    args) {
        super(prev, flow, action, args);
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "InvokeApi"
        });
    }
    getConfirmPayload() {
        var _a;
        return {
            actionName: (_a = this.action) === null || _a === void 0 ? void 0 : _a.actionName,
            arguments: this.arguments,
        };
    }
}
exports.InvokeApi = InvokeApi;
/**
 * Call to expand a Dialog.
 *
 * ```
 * dialog Foo(String arg) {}
 * // ..
 * fooDialog("hello")
 * ```
 */
class DialogExpansion extends FunctionExpression {
    constructor(prev, flow, 
    /**
     * The Dialog to call and expand the samples of in the simulation.
     */
    dialog, 
    /**
     * Name-value pairs for the Arguments passed to the Dialog.
     */
    args) {
        super(prev, flow, dialog, args);
        Object.defineProperty(this, "dialog", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: dialog
        });
        Object.defineProperty(this, "args", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: args
        });
        Object.defineProperty(this, "kind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Dialog"
        });
    }
}
exports.DialogExpansion = DialogExpansion;
/**
 * Represents an invound Request via the `expect` action.
 *
 * ```
 * expect(Invoke, my_utterance_event)
 * ```
 */
class Expect extends ActionExpression {
    constructor(prev, flow, 
    /**
     * The value of the Request Act.
     */
    act, 
    /**
     * The received Event.
     */
    event) {
        super(prev, flow);
        Object.defineProperty(this, "act", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: act
        });
        Object.defineProperty(this, "event", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: event
        });
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Expect"
        });
    }
    /**
     * @returns the type of the Act.
     */
    getActType() {
        var _a, _b;
        return (_b = (_a = this.act) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.getTypeType();
    }
    isAffirm() {
        var _a, _b, _c, _d, _e;
        return ((_c = (_b = (_a = this.act) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.getTypeType()) === null || _c === void 0 ? void 0 : _c.isAffirm()) || ((_e = (_d = this.act) === null || _d === void 0 ? void 0 : _d.type) === null || _e === void 0 ? void 0 : _e.isAffirm());
    }
    isDeny() {
        var _a, _b, _c, _d, _e;
        return ((_c = (_b = (_a = this.act) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.getTypeType()) === null || _c === void 0 ? void 0 : _c.isDeny()) || ((_e = (_d = this.act) === null || _d === void 0 ? void 0 : _d.type) === null || _e === void 0 ? void 0 : _e.isDeny());
    }
    isInvoke() {
        var _a, _b, _c, _d, _e;
        return ((_c = (_b = (_a = this.act) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.getTypeType()) === null || _c === void 0 ? void 0 : _c.isInvoke()) || ((_e = (_d = this.act) === null || _d === void 0 ? void 0 : _d.type) === null || _e === void 0 ? void 0 : _e.isInvoke());
    }
    isInform() {
        var _a, _b, _c, _d, _e;
        return ((_c = (_b = (_a = this.act) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.getTypeType()) === null || _c === void 0 ? void 0 : _c.isInform()) || ((_e = (_d = this.act) === null || _d === void 0 ? void 0 : _d.type) === null || _e === void 0 ? void 0 : _e.isInform());
    }
}
exports.Expect = Expect;
/**
 * Send a Response to the user.
 *
 * Is a Call Expression to `com.amazon.alexa.ask.conversations.response`
 *
 * ```acdl
 * response(
 *   response = my_apla_tempalte
 *   payload = Payload {
 *     key = value
 *   },
 *   act = Request { arguments = [foo.arguments.bar] },
 * })
 * ```
 */
class Response extends ActionExpression {
    constructor(prev, flow, 
    /**
     * The Apply instance for the actual Call Expression to the `response` Action.
     */
    apply, 
    /**
     * The Response template to use for this Response.
     */
    response, 
    /**
     * The Response Act value for this Response.
     */
    act, 
    /**
     * Optional nextAct value for this Response.
     */
    nextAct, 
    /**
     * Value of the Payload to be passed to the APL/A Response Template.
     */
    payload, 
    /**
     * Optional literal String representing the surface form of this Response.
     */
    surfaceForm) {
        super(prev, flow);
        Object.defineProperty(this, "flow", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: flow
        });
        Object.defineProperty(this, "apply", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: apply
        });
        Object.defineProperty(this, "response", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: response
        });
        Object.defineProperty(this, "act", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: act
        });
        Object.defineProperty(this, "nextAct", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: nextAct
        });
        Object.defineProperty(this, "payload", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: payload
        });
        Object.defineProperty(this, "surfaceForm", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: surfaceForm
        });
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Response"
        });
        Object.defineProperty(this, "actNode", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "responseNode", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.actNode = apply.getArgumentValue("act");
        this.responseNode = apply.getArgumentValue("response");
    }
    /**
     * If {@link Response.act} is `Request` then return the list of all the Action Arguments {@link ArgumentThing} that were individually requested.
     *
     * Individually requested arguments must exist for all required Arguments when calling an Action.
     */
    getIndividuallyRequestedArguments() {
        var _a, _b, _c;
        if ((_a = this.act) === null || _a === void 0 ? void 0 : _a.type.isRequest()) {
            const args = (_c = (_b = this.act.getProperty("arguments")) === null || _b === void 0 ? void 0 : _b.asLiteralList()) === null || _c === void 0 ? void 0 : _c.getItems();
            if ((args === null || args === void 0 ? void 0 : args.length) === 1) {
                return args.map((item) => item === null || item === void 0 ? void 0 : item.asArgument()).filter((a) => a !== undefined);
            }
        }
        return [];
    }
}
exports.Response = Response;
/**
 * A request to transfer delegation from Alexa Conversations to IM.
 */
class DelegateRequest extends ActionExpression {
    constructor(prev, flow, apply, updatedRequest) {
        super(prev, flow);
        Object.defineProperty(this, "apply", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: apply
        });
        Object.defineProperty(this, "updatedRequest", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: updatedRequest
        });
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "DelegateRequest"
        });
        Object.defineProperty(this, "updatedRequestNode", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.updatedRequestNode = apply.getArgumentValue("updatedRequest");
    }
    getConfirmPayload() {
        var _a, _b;
        return {
            actionName: this.actionKind,
            arguments: (_b = (_a = this.checker.getThing(this.apply.getArgumentValue("updatedRequest"))) === null || _a === void 0 ? void 0 : _a.getProperty("slots")) === null || _b === void 0 ? void 0 : _b.getProperties(),
        };
    }
}
exports.DelegateRequest = DelegateRequest;
/**
 * Responds with a `Dialog.DelegateRequest` directive to the intent with the provided
 * slot values.
 *
 * Is a Call Expression to `com.amazon.alexa.ask.conversations.delegateToIntent`
 *
 * ```acdl
 * delegateToIntent<T>(
 *    getWeatherIntent,
 *    Weather {
 *       temp = 10,
 *       location = "Seattle"
 *    }
 * )
 * ```
 */
/**
 * A request to transfer delegation from Alexa Conversations to IM.
 */
class DelegateToIntent extends ActionExpression {
    constructor(prev, flow, apply, intent, slots) {
        super(prev, flow);
        Object.defineProperty(this, "apply", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: apply
        });
        Object.defineProperty(this, "intent", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: intent
        });
        Object.defineProperty(this, "slots", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: slots
        });
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "DelegateToIntent"
        });
        Object.defineProperty(this, "intentNode", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "slotsNode", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.intentNode = apply.getArgumentValue("intent");
        this.slotsNode = apply.getArgumentValue("slots");
    }
    getConfirmPayload() {
        var _a;
        return {
            actionName: this.actionKind,
            arguments: (_a = this.checker.getThing(this.apply.getArgumentValue("slots"))) === null || _a === void 0 ? void 0 : _a.getProperties(),
        };
    }
}
exports.DelegateToIntent = DelegateToIntent;
/**
 * An ambient Expression to Confirm Arguments that will be passed to some API Action.
 *
 * ```
 * confirmArgs([foo.arguments.bar])
 *
 * ```
 */
class ConfirmArgs extends ActionExpression {
    constructor(prev, flow, 
    /**
     * Lis
     */
    confirmArgs) {
        super(prev, flow);
        Object.defineProperty(this, "confirmArgs", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: confirmArgs
        });
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "ConfirmArgs"
        });
    }
}
exports.ConfirmArgs = ConfirmArgs;
/**
 * A Response to the user to to confirm that Alexa should call some API.
 */
class ConfirmAction extends ActionExpression {
    constructor(prev, flow, response, actionName, payload) {
        var _a;
        super(prev, flow);
        Object.defineProperty(this, "response", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: response
        });
        Object.defineProperty(this, "actionName", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: actionName
        });
        Object.defineProperty(this, "payload", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: payload
        });
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "ConfirmAction"
        });
        Object.defineProperty(this, "actionNameNode", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.actionNameNode = (_a = this.apply) === null || _a === void 0 ? void 0 : _a.getArgument("actionName");
    }
}
exports.ConfirmAction = ConfirmAction;
/**
 * An ambient expression informing Alexa how to request various arguments for various actions.
 */
class Ensure extends ActionExpression {
    constructor(prev, flow, requestArgs) {
        super(prev, flow);
        Object.defineProperty(this, "requestArgs", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: requestArgs
        });
        Object.defineProperty(this, "actionKind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Ensure"
        });
    }
    /**
     * Gets a list of all the Action Arguments {@link ArgumentThing} that were individually requested.
     *
     * Individually requested arguments must exist for all required Arguments when calling an Action.
     */
    getIndividuallyRequestedArguments() {
        var _a, _b, _c, _d;
        return ((_d = (_c = (_b = (_a = this.requestArgs) === null || _a === void 0 ? void 0 : _a.asLiteralList()) === null || _b === void 0 ? void 0 : _b.getItems()) === null || _c === void 0 ? void 0 : _c.map((item) => {
            var _a, _b, _c, _d;
            if (item === null || item === void 0 ? void 0 : item.type.isRequestArguments()) {
                const args = (_a = item.getProperty("arguments")) === null || _a === void 0 ? void 0 : _a.asLiteralList();
                if (args !== undefined && ((_b = args.getItems()) === null || _b === void 0 ? void 0 : _b.length) === 1) {
                    return ((_d = (_c = args
                        .getItems()) === null || _c === void 0 ? void 0 : _c.map((item) => item === null || item === void 0 ? void 0 : item.asArgument()).filter((a) => a !== undefined)) !== null && _d !== void 0 ? _d : []);
                }
            }
            return [];
        }).reduce((a, b) => a.concat(b), [])) !== null && _d !== void 0 ? _d : []);
    }
}
exports.Ensure = Ensure;
/**
 * Represents a fork in the Dialog Flow based on Condition. Expressions after receiving a ConditionalBranch
 * are the expressions contained within the if OR within the else. {@link Flow.interpret} will call your
 * callback once if there is no `else` and twice if there is.
 */
class ConditionalBranch extends BaseExpression {
    constructor(prev, flow, expr) {
        super(prev, flow);
        Object.defineProperty(this, "expr", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: expr
        });
        Object.defineProperty(this, "kind", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "Condition"
        });
    }
}
exports.ConditionalBranch = ConditionalBranch;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwcmVzc2lvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9leHByZXNzaW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQTBCQSxNQUFNLGNBQWM7SUF1QmxCLFlBQXFCLElBQTRCLEVBQVcsSUFBZ0I7Ozs7OzttQkFBdkQ7Ozs7OzttQkFBdUM7O1FBdEI1RDs7Ozs7V0FBa0M7UUFFbEM7O1dBRUc7UUFDSDs7Ozs7V0FBOEI7UUFFOUI7O1dBRUc7UUFDSDs7Ozs7V0FBb0I7UUFFcEI7O1dBRUc7UUFDSDs7Ozs7V0FBNkM7UUFFN0M7O1dBRUc7UUFDSDs7Ozs7V0FBaUM7UUFHL0IsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQzVCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUM1QixJQUFJLENBQUMsR0FBRyxHQUFHLE1BQUEsSUFBSSxDQUFDLFVBQVUsMENBQUUsR0FBRyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBQSxJQUFJLENBQUMsVUFBVSwwQ0FBRSxHQUFHLENBQUM7SUFDbEMsQ0FBQztJQUVNLFFBQVE7UUFDYixPQUFPLElBQUksWUFBWSxnQkFBZ0IsQ0FBQztJQUMxQyxDQUFDO0lBRU0sT0FBTztRQUNaLE9BQU8sSUFBSSxZQUFZLGVBQWUsQ0FBQztJQUN6QyxDQUFDO0lBRU0sbUJBQW1CO1FBQ3hCLE9BQU8sSUFBSSxZQUFZLGlCQUFpQixDQUFDO0lBQzNDLENBQUM7SUFFTSxlQUFlO1FBQ3BCLE9BQU8sSUFBSSxZQUFZLGFBQWEsQ0FBQztJQUN2QyxDQUFDO0lBRU0sYUFBYTtRQUNsQixPQUFPLElBQUksWUFBWSxXQUFXLENBQUM7SUFDckMsQ0FBQztJQUVNLGlCQUFpQjtRQUN0QixPQUFPLElBQUksWUFBWSxlQUFlLENBQUM7SUFDekMsQ0FBQztJQUVNLFFBQVE7UUFDYixPQUFPLElBQUksWUFBWSxNQUFNLENBQUM7SUFD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